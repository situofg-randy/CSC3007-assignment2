[{"/Users/angrandy/Desktop/CSC3007-assignment2/src/index.js":"1","/Users/angrandy/Desktop/CSC3007-assignment2/src/Barchart.js":"2","/Users/angrandy/Desktop/CSC3007-assignment2/src/print.js":"3","/Users/angrandy/Desktop/CSC3007-assignment2/src/StackedBarChart.js":"4","/Users/angrandy/Desktop/CSC3007-assignment2/src/useResizeObserver.js":"5"},{"size":272,"mtime":1655649319545,"results":"6","hashOfConfig":"7"},{"size":2398,"mtime":1655655531284,"results":"8","hashOfConfig":"7"},{"size":3990,"mtime":1655652197498,"results":"9","hashOfConfig":"7"},{"size":3498,"mtime":1655656426956,"results":"10","hashOfConfig":"7"},{"size":588,"mtime":1655648598734,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"a4cs9i",{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"/Users/angrandy/Desktop/CSC3007-assignment2/src/index.js",[],[],"/Users/angrandy/Desktop/CSC3007-assignment2/src/Barchart.js",["30"],[],"import React from \"react\";  \nimport { useState } from \"react\";\nimport { print } from \"./print\";  \nimport StackedBarChart from \"./StackedBarChart\"\n\nexport const Barchart = () => {\n    const input = require(\"./data.json\")\n    \n    let year = new Set()\n    Object.values(input).forEach((v) => {year.add(v.year)})    \n    year = Array.from(year)\n    \n    let allKeys = new Set()\n    Object.values(input).forEach((v) => {allKeys.add(v.level_2)})      \n    allKeys = Array.from(allKeys)\n\n    let res = input.reduce((acc, {year, level_2, value}) =>\n    {\n        acc[year] = acc[year] || new Set();\n        acc[year][level_2] = parseInt(value)\n        acc[year][\"year\"] = parseInt(year)\n        return acc;\n    }, {})\n\n    let data = []\n\n    year.forEach(k => {\n         data.push(res[k])\n    });\n\n\n    const getRandomColor = () => {\n        let letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i++) {\n          color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n\n    let color = [\n        \"#656431\",\n        \"#68A696\",\n        \"#9F2964\",\n        \"#C19131\",\n        \"#A5235F\",\n        \"#67ED30\",\n        \"#14C069\",\n        \"#109AE0\",\n        \"#DCB545\",\n        \"#BF354F\"\n    ]\n\n    let colors = {}\n    for (let v in allKeys) {\n        colors[allKeys[v]] = color[v]\n    }\n\n    print(year)\n\n    const [keys, setKeys] = useState(allKeys)\n\n    \n    return (\n        <React.Fragment>\n            <h2>Cases Recorded For Major Offences  </h2>\n            <StackedBarChart data={data} keys={keys} colors={colors} />\n\n            <div className=\"fields\">\n                {allKeys.map(key => (\n                <div key={key} className=\"field\">\n                    <input\n                    id={key}\n                    type=\"checkbox\"\n                    checked={keys.includes(key)}\n                    onChange={e => {\n                        if (e.target.checked) {\n                        setKeys(Array.from(new Set([...keys, key])));\n                        } else {\n                        setKeys(keys.filter(_key => _key !== key));\n                        }\n                    }}\n                    />\n                    <label htmlFor={key} style={{ color: colors[key] }}>\n                    {key}\n                    </label>\n                </div>\n                ))}\n            </div>\n        </React.Fragment>\n    )\n}\n\n\n\n\n","/Users/angrandy/Desktop/CSC3007-assignment2/src/print.js",[],[],[],"/Users/angrandy/Desktop/CSC3007-assignment2/src/StackedBarChart.js",["31","32","33"],[],"import React, { useEffect, useRef } from \"react\";\nimport {\n  select,\n  scaleBand,\n  axisBottom,\n  stack,\n  max,\n  scaleLinear,\n  axisLeft,\n  stackOrderAscending,\n  pointer\n} from \"d3\";\nimport useResizeObserver from \"./useResizeObserver\";\n\n/**\n * Component that renders a StackedBarChart\n */\n\nfunction StackedBarChart({ data, keys, colors }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  var tooltip = select(\"#tooltip\")\n    .append(\"div\")\n    .style(\"opacity\", 0)\n    .attr(\"class\", \"tooltip\")\n    .style(\"background-color\", \"white\")\n    .style(\"border\", \"solid\")\n    .style(\"border-width\", \"1px\")\n    .style(\"border-radius\", \"5px\")\n    .style(\"padding\", \"10px\")\n\n  var mouseover = function(d) {\n    var subgroupName = select(this.parentNode).datum().key;\n    \n    tooltip\n        .html(\"subgroup: \" + subgroupName)\n        .style(\"opacity\", 1)\n  }\n\n  var mousemove = function(d) {\n    tooltip\n      .style(\"left\", (pointer(this)[0]+90) + \"px\") // It is important to put the +90: other wise the tooltip is exactly where the point is an it creates a weird effect\n      .style(\"top\", (pointer(this)[1]) + \"px\")\n  }\n  var mouseleave = function(d) {\n    tooltip\n      .style(\"opacity\", 0)\n  }\n\n  // will be called initially and on every data change\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    const { width, height } =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    // stacks / layers\n    const stackGenerator = stack()\n      .keys(keys)\n      .order(stackOrderAscending);\n    const layers = stackGenerator(data);\n    console.log(layers)\n\n    const extent = [\n      0,\n      max(layers, layer => max(layer, sequence => sequence[1]))\n    ];\n\n    // scales\n    const xScale = scaleBand()\n      .domain(data.map(d => d.year))\n      .range([0, width])\n      .padding(0.25);\n\n    const yScale = scaleLinear()\n      .domain(extent)\n      .range([height, 0]);\n\n    // rendering\n    svg\n      .selectAll(\".layer\")\n      .data(layers)\n      .join(\"g\")\n      .attr(\"class\", \"layer\")\n      .attr(\"fill\", layer => colors[layer.key])\n      .selectAll(\"rect\")\n      .data(layer => layer)\n      .join(\"rect\")\n      .attr(\"x\", sequence => xScale(sequence.data.year))\n      .attr(\"width\", xScale.bandwidth())\n      .attr(\"y\", sequence => yScale(sequence[1]))\n      .attr(\"height\", sequence => yScale(sequence[0]) - yScale(sequence[1]))\n      .on(\"mouseover\", (event, d) => {\n        select(\".tooltip\")\n        .text(\"Year: \" + d.data.year)\n        .style(\"position\", \"absolute\")\n        .style(\"background\", \"#fff\")\n        .style(\"left\", (event.pageX) + \"px\")\n        .style(\"top\", (event.pageY) + \"px\");\n\n        select(event.currentTarget).classed(\"selected\", true)\n    })\n    .on(\"mouseout\", (event, d) => {\n      select(\".tooltip\")\n      .text(\"\");\n\n      select(event.currentTarget).classed(\"selected\", false)\n  })\n\n    // axes\n    const xAxis = axisBottom(xScale);\n    svg\n      .select(\".x-axis\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(xAxis);\n\n    const yAxis = axisLeft(yScale);\n    svg.select(\".y-axis\").call(yAxis);\n  }, [colors, data, dimensions, keys]);\n\n  return (\n    <React.Fragment>\n      <div class=\"tooltip\"></div>\n      <div ref={wrapperRef} style={{ marginBottom: \"2rem\" }}>\n        <svg ref={svgRef}>\n          <g className=\"x-axis\" />\n          <g className=\"y-axis\" />\n        </svg>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default StackedBarChart;","/Users/angrandy/Desktop/CSC3007-assignment2/src/useResizeObserver.js",[],[],{"ruleId":"34","severity":1,"message":"35","line":32,"column":11,"nodeType":"36","messageId":"37","endLine":32,"endColumn":25},{"ruleId":"34","severity":1,"message":"38","line":34,"column":7,"nodeType":"36","messageId":"37","endLine":34,"endColumn":16},{"ruleId":"34","severity":1,"message":"39","line":42,"column":7,"nodeType":"36","messageId":"37","endLine":42,"endColumn":16},{"ruleId":"34","severity":1,"message":"40","line":47,"column":7,"nodeType":"36","messageId":"37","endLine":47,"endColumn":17},"no-unused-vars","'getRandomColor' is assigned a value but never used.","Identifier","unusedVar","'mouseover' is assigned a value but never used.","'mousemove' is assigned a value but never used.","'mouseleave' is assigned a value but never used."]